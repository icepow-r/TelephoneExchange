# Telephone Exchange System (–ú–∏–Ω–∏-–ê–¢–°)

–ö–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–∏–º—É–ª—è—Ü–∏–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–Ω–æ–π –º–∏–Ω–∏-–ê–¢–° –Ω–∞ C# —Å WPF –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤—É –∞–±–æ–Ω–µ–Ω—Ç–æ–≤ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É, —Å–æ–≤–µ—Ä—à–∞—Ç—å –∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –≤—ã–∑–æ–≤—ã, –∞ —Ç–∞–∫–∂–µ –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è —Ç–µ–∫—Å—Ç–æ–≤—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏–º—É–ª—è—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Ç–µ–ª–µ—Ñ–æ–Ω–Ω–æ–π —Å—Ç–∞–Ω—Ü–∏–∏ —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –∞–±–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π.

## üéØ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏—Å—Ç–µ–º—ã
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–±–æ–Ω–µ–Ω—Ç–æ–≤:** 7 (2N-1, –≥–¥–µ N=4)
- **–õ–∏–º–∏—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –ê–¢–°:** 4 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (2K, –≥–¥–µ K=2)
- **–î–ª–∏–Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞:** 3 —Ü–∏—Ñ—Ä—ã (001-999)
- **–ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞:** 5000 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
TelephoneExchange/
‚îú‚îÄ‚îÄ TelephoneExchange.Server/    # –°–µ—Ä–≤–µ—Ä–Ω–æ–µ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ Models/                  # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (Subscriber, Connection)
‚îÇ   ‚îú‚îÄ‚îÄ Network/                 # –°–µ—Ç–µ–≤–∞—è –ª–æ–≥–∏–∫–∞ (MiniATS, ClientHandler)
‚îÇ   ‚îî‚îÄ‚îÄ config.json             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞
‚îú‚îÄ‚îÄ TelephoneExchange.Client/    # –ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ WPF –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ Models/                  # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (SubscriberInfo)
‚îÇ   ‚îú‚îÄ‚îÄ Network/                 # –°–µ—Ç–µ–≤–∞—è –ª–æ–≥–∏–∫–∞ (PhoneClient)
‚îÇ   ‚îî‚îÄ‚îÄ MainWindow.xaml         # –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–ª–∏–µ–Ω—Ç–∞
‚îî‚îÄ‚îÄ docs/                        # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –¥–∏–∞–≥—Ä–∞–º–º—ã
    ‚îú‚îÄ‚îÄ DOCUMENTATION.md         # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
    ‚îú‚îÄ‚îÄ TASKS.md                # –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ
    ‚îî‚îÄ‚îÄ diagrams/               # UML –¥–∏–∞–≥—Ä–∞–º–º—ã (PlantUML)
```

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **C# .NET 9.0**
- **WPF** (Windows Presentation Foundation)
- **TCP Sockets** (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ)
- **JSON** (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- .NET 9.0 SDK –∏–ª–∏ –≤—ã—à–µ
- Windows (–¥–ª—è WPF –∫–ª–∏–µ–Ω—Ç–∞)

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
dotnet run --project TelephoneExchange.Server/TelephoneExchange.Server.csproj
```

### –ó–∞–ø—É—Å–∫ –∫–ª–∏–µ–Ω—Ç–∞
```bash
dotnet run --project TelephoneExchange.Client/TelephoneExchange.Client.csproj
```

### –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
```bash
dotnet build TelephoneExchange.sln
```

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä** ‚Äî –æ–Ω –Ω–∞—á–Ω—ë—Ç –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—Ç—å –ø–æ—Ä—Ç 5000
2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç–æ–≤** ‚Äî –∫–∞–∂–¥–æ–º—É –±—É–¥–µ—Ç –ø—Ä–∏—Å–≤–æ–µ–Ω —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä
3. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É** ‚Äî –≤–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å `127.0.0.1:5000` –∏ –Ω–∞–∂–º–∏—Ç–µ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è"
4. **–°–æ–≤–µ—Ä—à–∏—Ç–µ –≤—ã–∑–æ–≤:**
   - –°–Ω–∏–º–∏—Ç–µ —Ç—Ä—É–±–∫—É (–ø–æ–ª—É—á–∏—Ç–µ —Å–∏–≥–Ω–∞–ª "–ì–æ—Ç–æ–≤")
   - –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –¥—Ä—É–≥–æ–≥–æ –∞–±–æ–Ω–µ–Ω—Ç–∞
   - –ù–∞–∂–º–∏—Ç–µ "–ü–æ–∑–≤–æ–Ω–∏—Ç—å"
5. **–ü—Ä–∏–º–∏—Ç–µ –≤—ã–∑–æ–≤** ‚Äî –≤ –¥—Ä—É–≥–æ–º –∫–ª–∏–µ–Ω—Ç–µ —Å–Ω–∏–º–∏—Ç–µ —Ç—Ä—É–±–∫—É –ø—Ä–∏ –≤—Ö–æ–¥—è—â–µ–º –≤—ã–∑–æ–≤–µ
6. **–û–±–º–µ–Ω–∏–≤–∞–π—Ç–µ—Å—å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —á–∞—Ç –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
7. **–ó–∞–≤–µ—Ä—à–∏—Ç–µ –≤—ã–∑–æ–≤** ‚Äî –ø–æ–ª–æ–∂–∏—Ç–µ —Ç—Ä—É–±–∫—É

## üé® –°–æ—Å—Ç–æ—è–Ω–∏—è –∞–±–æ–Ω–µ–Ω—Ç–∞

- **Idle** ‚Äî –æ–∂–∏–¥–∞–Ω–∏–µ (—Ç—Ä—É–±–∫–∞ –ø–æ–ª–æ–∂–µ–Ω–∞)
- **Ready** ‚Äî –≥–æ—Ç–æ–≤ –∫ –Ω–∞–±–æ—Ä—É (—Ç—Ä—É–±–∫–∞ —Å–Ω—è—Ç–∞, –µ—Å—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–µ –ª–∏–Ω–∏–∏)
- **Busy** ‚Äî –∑–∞–Ω—è—Ç–æ (—Ç—Ä—É–±–∫–∞ —Å–Ω—è—Ç–∞, –Ω–µ—Ç —Å–≤–æ–±–æ–¥–Ω—ã—Ö –ª–∏–Ω–∏–π)
- **Dialing** ‚Äî –Ω–∞–±–æ—Ä –Ω–æ–º–µ—Ä–∞ (–≤—ã–∑—ã–≤–∞–µ—Ç –¥—Ä—É–≥–æ–≥–æ –∞–±–æ–Ω–µ–Ω—Ç–∞)
- **Ringing** ‚Äî –≤—Ö–æ–¥—è—â–∏–π –≤—ã–∑–æ–≤ (–∫—Ç–æ-—Ç–æ –∑–≤–æ–Ω–∏—Ç)
- **InCall** ‚Äî –≤ —Ä–∞–∑–≥–æ–≤–æ—Ä–µ (—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ)

## üì° –ü—Ä–æ—Ç–æ–∫–æ–ª –æ–±–º–µ–Ω–∞

### –ö–æ–º–∞–Ω–¥—ã –∫–ª–∏–µ–Ω—Ç ‚Üí —Å–µ—Ä–≤–µ—Ä
- `CONNECT` ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
- `PICKUP` ‚Äî —Å–Ω—è—Ç—å —Ç—Ä—É–±–∫—É
- `HANGUP` ‚Äî –ø–æ–ª–æ–∂–∏—Ç—å —Ç—Ä—É–±–∫—É
- `DIAL:<–Ω–æ–º–µ—Ä>` ‚Äî –Ω–∞–±—Ä–∞—Ç—å –Ω–æ–º–µ—Ä
- `MESSAGE:<—Ç–µ–∫—Å—Ç>` ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ

### –°–æ–æ–±—â–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä ‚Üí –∫–ª–∏–µ–Ω—Ç
- `ASSIGNED:<–Ω–æ–º–µ—Ä>` ‚Äî –ø—Ä–∏—Å–≤–æ–µ–Ω –Ω–æ–º–µ—Ä
- `SIGNAL:–≥–æ—Ç–æ–≤/–∑–∞–Ω—è—Ç–æ` ‚Äî —Å–∏–≥–Ω–∞–ª –ê–¢–°
- `STATE:<—Å–æ—Å—Ç–æ—è–Ω–∏–µ>` ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `INCOMING_CALL:<–Ω–æ–º–µ—Ä>` ‚Äî –≤—Ö–æ–¥—è—â–∏–π –≤—ã–∑–æ–≤
- `CALL_CONNECTED` ‚Äî —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- `CALL_ENDED` ‚Äî —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–∑–æ—Ä–≤–∞–Ω–æ
- `MESSAGE:<—Ç–µ–∫—Å—Ç>` ‚Äî –≤—Ö–æ–¥—è—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- `SUBSCRIBERS:<json>` ‚Äî —Å–ø–∏—Å–æ–∫ –∞–±–æ–Ω–µ–Ω—Ç–æ–≤
- `ERROR:<—Ç–µ–∫—Å—Ç>` ‚Äî –æ—à–∏–±–∫–∞

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](docs/DOCUMENTATION.md) ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã, –∫–ª–∞—Å—Å–æ–≤ –∏ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- [–î–∏–∞–≥—Ä–∞–º–º—ã](docs/diagrams/) ‚Äî ER-–¥–∏–∞–≥—Ä–∞–º–º–∞, –¥–∏–∞–≥—Ä–∞–º–º–∞ –∫–ª–∞—Å—Å–æ–≤, –¥–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (PlantUML)

## üß™ –ü—Ä–∏–º–µ—Ä—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

### –£—Å–ø–µ—à–Ω—ã–π –≤—ã–∑–æ–≤
1. –ö–ª–∏–µ–Ω—Ç A —Å–Ω–∏–º–∞–µ—Ç —Ç—Ä—É–±–∫—É –∏ –∑–≤–æ–Ω–∏—Ç –∫–ª–∏–µ–Ω—Ç—É B
2. –ö–ª–∏–µ–Ω—Ç B –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤—ã–∑–æ–≤
3. –û–±–∞ –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
4. –û–¥–∏–Ω –∏–∑ –Ω–∏—Ö –∑–∞–≤–µ—Ä—à–∞–µ—Ç –≤—ã–∑–æ–≤

### –õ–∏–º–∏—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
1. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ 4 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è (–º–∞–∫—Å–∏–º—É–º)
2. –ü—è—Ç—ã–π –∞–±–æ–Ω–µ–Ω—Ç —Å–Ω–∏–º–∞–µ—Ç —Ç—Ä—É–±–∫—É –∏ –ø–æ–ª—É—á–∞–µ—Ç —Å–∏–≥–Ω–∞–ª "–ó–∞–Ω—è—Ç–æ"
3. –ü–æ—Å–ª–µ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ª–∏–Ω–∏–∏ –º–æ–∂–µ—Ç —Å–æ–≤–µ—Ä—à–∏—Ç—å –≤—ã–∑–æ–≤

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –í—ã–∑–æ–≤ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –Ω–æ–º–µ—Ä–∞ ‚Üí –æ—à–∏–±–∫–∞ "–ù–æ–º–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω"
- –í—ã–∑–æ–≤ –∑–∞–Ω—è—Ç–æ–≥–æ –∞–±–æ–Ω–µ–Ω—Ç–∞ ‚Üí –æ—à–∏–±–∫–∞ "–ê–±–æ–Ω–µ–Ω—Ç –∑–∞–Ω—è—Ç"

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `TelephoneExchange.Server/config.json`:

```json
{
  "MaxConnections": 4,
  "PhoneNumberLength": 3,
  "ServerPort": 5000
}
```

## üìù –ò—Å—Ç–æ—Ä–∏—è –∫–æ–º–º–∏—Ç–æ–≤

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω —Å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –∫–æ–º–º–∏—Ç–∞–º–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:
- Initial commit: project structure
- Server implementation: models, network, and core logic
- Client implementation: WPF interface and network logic
- Add documentation and diagrams

## üéì –ö—É—Ä—Å–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞

–ü—Ä–æ–µ–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –≤ —Ä–∞–º–∫–∞—Ö –∫—É—Ä—Å–æ–≤–æ–π —Ä–∞–±–æ—Ç—ã –ø–æ –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:
- –ú–æ–¥–µ–ª—å ¬´—Å—É—â–Ω–æ—Å—Ç—å-—Å–≤—è–∑—å¬ª
- –î–∏–∞–≥—Ä–∞–º–º–∞ –∫–ª–∞—Å—Å–æ–≤
- –î–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –†–∞–±–æ—Ç–∞—é—â–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–£—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
